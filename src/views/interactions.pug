mixin interactionTable(list)
    table
        thead
            tr 
                th(width='20px') #
                th User 
                th Display name
                th(width='90px') # of characters
                th(width='70px') # of replies
                th(width='70px') # of quotes
                th(width='70px') # of reposts
                th(width='70px') # of likes
                th(width='70px') Total

        tbody
            each val, idx in list
                tr
                    td= idx+1
                    td: a(href='https://bsky.app/profile/'+val.did) #{(val.handle.length > 0) ? `@${val.handle}` : val.subject}
                    td= val.displayName
                    td(style='text-align:center')= val.totalTextLength
                    td(style='text-align:center')= val.commentsCount
                    td(style='text-align:center')= val.quotesCount
                    td(style='text-align:center')= val.repostsCount
                    td(style='text-align:center')= val.likesCount
                    td(style='text-align:center')= val.totalCount

include layout.pug
    form(id="form" action="/interactions" method="get")
        input(id="handle" type="text" name="handle" value='' placeholder="User")
        input(id="button" type="submit" value="Search")

    if !userFound
        p= textVal

    if userFound
        p Nas Ãºltimas 24 horas...

        if interactions.withOthers.length > 0
            p= `@${handle} interagiu com:`
            +interactionTable(interactions.withOthers)

        if interactions.withMe.length > 0
            p= `Interagiram com @${handle}:`
            +interactionTable(interactions.withMe)
